# Engine API Workflow - Environment Configuration
# Complete configuration for advanced worker system

# üåê Server Configuration
PORT=8081
ENV=development
LOG_LEVEL=debug

# üóÑÔ∏è Database Configuration
MONGODB_URI=mongodb://admin:password123@localhost:27017/engine_workflow?authSource=admin
MONGODB_DATABASE=engine_workflow

# üî¥ Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# üîë JWT Security
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-32-chars-minimum
JWT_ISSUER=engine-api-workflow
JWT_AUDIENCE=engine-api
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=168h

# üõ°Ô∏è Security Features
ENABLE_TOKEN_BLACKLIST=true
ENABLE_RATE_LIMIT=true
ENABLE_CORS=true

# üåç CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
TRUSTED_PROXIES=127.0.0.1,::1

# üö¶ Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# ü§ñ Worker Pool Configuration (ACTUALIZADO)
WORKER_POOL_MIN_SIZE=3
WORKER_POOL_MAX_SIZE=20
WORKER_POOL_SCALE_UP_THRESHOLD=5
WORKER_POOL_SCALE_DOWN_THRESHOLD=0.3

# üîÑ Retry System Configuration (NUEVO)
DEFAULT_MAX_RETRIES=3
DEFAULT_RETRY_DELAY=30s
RETRY_BACKOFF_STRATEGY=exponential
RETRY_EXPONENTIAL_BASE=2.0
RETRY_MAX_DELAY=10m

# ‚è±Ô∏è Action Timeouts (NUEVO)
HTTP_ACTION_TIMEOUT=30s
EMAIL_ACTION_TIMEOUT=10s
SLACK_ACTION_TIMEOUT=10s
WEBHOOK_ACTION_TIMEOUT=15s

# üìà Monitoring Configuration (ACTUALIZADO)
METRICS_ENABLED=true
METRICS_CLEANUP_INTERVAL=24h
METRICS_RETENTION_DAYS=30
HEALTH_CHECK_INTERVAL=60s

# üìß Email Configuration (ACTUALIZADO - Para EmailActionExecutor)
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_NAME=Engine API Workflow
SMTP_FROM_EMAIL=noreply@yourcompany.com

# üí¨ Slack Configuration (ACTUALIZADO - Para SlackActionExecutor)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_DEFAULT_CHANNEL=#general

# üîó Webhook Configuration (NUEVO)
WEBHOOK_DEFAULT_TIMEOUT=15s
WEBHOOK_MAX_RETRIES=3
WEBHOOK_VERIFY_SSL=true

# üè• Health Check Configuration (ACTUALIZADO)
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_ERROR_THRESHOLD=10.0
HEALTH_RESPONSE_TIME_THRESHOLD=30000

# üìä Dashboard Configuration (ACTUALIZADO)
DASHBOARD_ENABLED=true
DASHBOARD_REFRESH_INTERVAL=30s
DASHBOARD_MAX_RECENT_ACTIVITY=50
DASHBOARD_THEME=light

# üìä Workflow Limits (ACTUALIZADO)
MAX_WORKFLOWS_PER_USER=100
MAX_STEPS_PER_WORKFLOW=50
MAX_EXECUTION_TIME=3600s
MAX_CONCURRENT_EXECUTIONS=10

# üîß Advanced Worker Configuration (NUEVO)
WORKER_HEARTBEAT_INTERVAL=30s
WORKER_IDLE_TIMEOUT=300s
WORKER_TASK_BUFFER_SIZE=10
WORKER_GRACEFUL_SHUTDOWN_TIMEOUT=60s

# üì• Queue Configuration (ACTUALIZADO)
QUEUE_MAX_SIZE=10000
QUEUE_PRIORITY_LEVELS=5
QUEUE_CLEANUP_INTERVAL=1h
QUEUE_STALE_TASK_TIMEOUT=1h
QUEUE_PROCESSING_TIMEOUT=300s

# üîç Logging and Debugging (ACTUALIZADO)
LOG_FORMAT=json
LOG_ENABLE_CALLER=true
LOG_ENABLE_STACKTRACE=true
DEBUG_MODE=false
VERBOSE_LOGGING=false
PROFILING_ENABLED=false

# üè≠ Production Optimizations (NUEVO)
ENABLE_GZIP_COMPRESSION=true
MAX_REQUEST_SIZE=10MB
READ_TIMEOUT=30s
WRITE_TIMEOUT=30s
IDLE_TIMEOUT=120s

# üîê Advanced Security (ACTUALIZADO)
ENABLE_REQUEST_ID=true
ENABLE_SECURITY_HEADERS=true
BCRYPT_COST=12
SESSION_TIMEOUT=24h

# üìà Performance Monitoring (ACTUALIZADO)
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_SLOW_QUERY_THRESHOLD=1000ms
PERFORMANCE_MEMORY_ALERT_THRESHOLD=80
PERFORMANCE_CPU_ALERT_THRESHOLD=80

# üìä Metrics Export (NUEVO)
ENABLE_METRICS_EXPORT=false
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090
METRICS_EXPORT_INTERVAL=15s

# üß™ Development Tools (ACTUALIZADO)
ENABLE_API_DOCS=true
SWAGGER_ENABLED=true
SWAGGER_ENDPOINT=/docs
ENABLE_DEBUG_ROUTES=false
HOT_RELOAD_ENABLED=false
DEVELOPMENT_CORS_ENABLED=true

# üåç Localization (ACTUALIZADO)
DEFAULT_TIMEZONE=UTC
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr,de
SUPPORTED_TIMEZONES=UTC,America/New_York,Europe/London,Asia/Tokyo
LOCALE=en-US

# üîÑ Backup and Recovery (ACTUALIZADO)
BACKUP_ENABLED=false
BACKUP_INTERVAL=24h
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_TYPE=local
BACKUP_STORAGE_PATH=./backups

# üß™ Testing Configuration (ACTUALIZADO)
TEST_MODE=false
TEST_DATABASE_URI=mongodb://localhost:27017/engine_workflow_test
TEST_REDIS_DB=1
INTEGRATION_TESTS_ENABLED=false

# üì° Real-time Features (ACTUALIZADO)
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=8082
REALTIME_UPDATES_ENABLED=true

# üö® Alerts Configuration (ACTUALIZADO)
ALERTS_ENABLED=true
ALERTS_RETENTION_DAYS=7
ALERTS_EMAIL_NOTIFICATIONS=false
ALERTS_SLACK_NOTIFICATIONS=false

# üíæ Cache Configuration (ACTUALIZADO)
CACHE_ENABLED=true
CACHE_TTL=300s
CACHE_MAX_SIZE=100MB

# üîî Notification Channels (ACTUALIZADO)
NOTIFICATION_WEBHOOK_ENABLED=true
NOTIFICATION_EMAIL_ENABLED=false
NOTIFICATION_SLACK_ENABLED=false
NOTIFICATION_SMS_ENABLED=false

# üìã Audit and Compliance (ACTUALIZADO)
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
COMPLIANCE_MODE=standard
DATA_ENCRYPTION_ENABLED=false

# üéõÔ∏è Feature Flags (ACTUALIZADO)
FEATURE_WORKFLOW_VERSIONING=true
FEATURE_ADVANCED_SCHEDULING=true
FEATURE_WORKFLOW_TEMPLATES=false
FEATURE_AUDIT_LOGGING=true
FEATURE_BULK_OPERATIONS=false

# üóÑÔ∏è Database Connection Pool (ACTUALIZADO)
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=30s
DB_CONNECTION_IDLE_TIMEOUT=300s

# üî¥ Redis Configuration Extended (ACTUALIZADO)
REDIS_MAX_CONNECTIONS=10
REDIS_CONNECTION_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s

# üîç Monitoring and Observability (ACTUALIZADO)
JAEGER_ENABLED=false
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# üìÅ File Upload Configuration (ACTUALIZADO)
UPLOAD_MAX_FILE_SIZE=10MB
UPLOAD_ALLOWED_TYPES=json,yaml,csv
UPLOAD_STORAGE_PATH=./uploads

# üåê API Configuration (ACTUALIZADO)
API_VERSION=v1
API_REQUEST_TIMEOUT=30s
API_MAX_REQUEST_SIZE=10MB

# üîß Advanced Configuration (ACTUALIZADO)
GRACEFUL_SHUTDOWN_TIMEOUT=15s
BATCH_PROCESSING_SIZE=100
SYNC_INTERVAL=60s

# üöÄ Auto Cleanup (ACTUALIZADO)
AUTO_CLEANUP_ENABLED=true
AUTO_CLEANUP_OLD_LOGS_DAYS=30
AUTO_CLEANUP_OLD_METRICS_DAYS=90

# ==========================================
# NUEVAS CONFIGURACIONES ESPEC√çFICAS PARA 
# SISTEMA AVANZADO DE WORKERS
# ==========================================

# üéØ Action Executor Configuration (NUEVO)
ENABLE_REAL_HTTP_EXECUTOR=true
ENABLE_REAL_EMAIL_EXECUTOR=true
ENABLE_REAL_SLACK_EXECUTOR=true
ENABLE_REAL_WEBHOOK_EXECUTOR=true

# üìä Advanced Metrics Configuration (NUEVO)
METRICS_COLLECTION_INTERVAL=60s
METRICS_AGGREGATION_INTERVAL=300s
METRICS_HOURLY_STATS_ENABLED=true
METRICS_DAILY_STATS_ENABLED=true

# üîÑ Advanced Retry Configuration (NUEVO)
RETRY_JITTER_ENABLED=true
RETRY_JITTER_MAX_PERCENT=10
RETRY_FIBONACCI_BACKOFF_ENABLED=false
RETRY_CLEANUP_INTERVAL=1h

# üèä Worker Pool Advanced Settings (NUEVO)
POOL_AUTO_SCALING_ENABLED=true
POOL_SCALING_CHECK_INTERVAL=30s
POOL_WORKER_TIMEOUT_THRESHOLD=5m
POOL_HEALTH_CHECK_INTERVAL=60s

# üìà Performance Tuning (NUEVO)
TASK_EXECUTION_TIMEOUT=30m
STEP_EXECUTION_TIMEOUT=10m
MAX_CONCURRENT_TASKS_PER_WORKER=5
WORKER_TASK_QUEUE_SIZE=100

# üîç Advanced Monitoring (NUEVO)
ENABLE_DETAILED_METRICS=true
ENABLE_PERFORMANCE_PROFILING=false
ENABLE_MEMORY_MONITORING=true
ENABLE_CPU_MONITORING=true

# üö® Advanced Health Checks (NUEVO)
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_FAILURE_THRESHOLD=3
HEALTH_CHECK_SUCCESS_THRESHOLD=2
HEALTH_CHECK_DETAILED_ENABLED=true

# üìä Dashboard Advanced Features (NUEVO)
DASHBOARD_REAL_TIME_ENABLED=true
DASHBOARD_CHART_DATA_POINTS=100
DASHBOARD_AUTO_REFRESH_ENABLED=true
DASHBOARD_EXPORT_ENABLED=true

# üîí Security Enhancements (NUEVO)
ENABLE_API_KEY_AUTH=false
API_KEY_HEADER_NAME=X-API-Key
ENABLE_IP_WHITELIST=false
IP_WHITELIST=127.0.0.1,::1

# üì° WebSocket Configuration (NUEVO)
WS_HEARTBEAT_INTERVAL=30s
WS_MAX_CONNECTIONS=1000
WS_MESSAGE_BUFFER_SIZE=1024
WS_CONNECTION_TIMEOUT=60s

# üéõÔ∏è Experimental Features (NUEVO)
EXPERIMENTAL_FEATURES_ENABLED=false
EXPERIMENTAL_DISTRIBUTED_WORKERS=false
EXPERIMENTAL_AI_OPTIMIZATION=false
EXPERIMENTAL_AUTO_SCALING_ML=false