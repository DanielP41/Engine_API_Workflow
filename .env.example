# Engine API Workflow - Environment Configuration
# Complete configuration for advanced worker system with CACHE

# üåê Server Configuration
PORT=8081
ENV=development
LOG_LEVEL=debug

# üóÑÔ∏è Database Configuration
MONGODB_URI=mongodb://admin:password123@localhost:27017/engine_workflow?authSource=admin
MONGODB_DATABASE=engine_workflow

# üî¥ Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# üîë JWT Security
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-32-chars-minimum
JWT_ISSUER=engine-api-workflow
JWT_AUDIENCE=engine-api
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=168h

# üõ°Ô∏è Security Features
ENABLE_TOKEN_BLACKLIST=true
ENABLE_RATE_LIMIT=true
ENABLE_CORS=true

# üåç CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
TRUSTED_PROXIES=127.0.0.1,::1

# üö¶ Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# üíæ CACHE CONFIGURATION (NUEVO SISTEMA)
# ==========================================
# üöÄ Configuraci√≥n Principal del Cach√©
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=5m
CACHE_CLEANUP_INTERVAL=1h
CACHE_MAX_MEMORY=100MB
CACHE_COMPRESSION_LEVEL=1
CACHE_SERIALIZER=json

# ‚è∞ TTL por Dominio (Time To Live)
CACHE_DASHBOARD_TTL=30s
CACHE_WORKFLOW_TTL=5m
CACHE_USER_TTL=15m
CACHE_METRICS_TTL=1m
CACHE_QUEUE_TTL=10s
CACHE_SYSTEM_TTL=5m
CACHE_AUTH_TTL=10m

# üîß Configuraci√≥n Avanzada del Cach√©
CACHE_ENABLE_COMPRESSION=false
CACHE_ENABLE_METRICS=true
CACHE_ENABLE_DISTRIBUTION=false
CACHE_ENABLE_PERSISTENCE=true
CACHE_ENABLE_WARMUP=true

# üî• Warmup Configuration
CACHE_WARMUP_ENABLED=true
CACHE_WARMUP_TIMEOUT=30s
CACHE_WARMUP_CONCURRENCY=5

# üóëÔ∏è Invalidation Configuration  
CACHE_INVALIDATION_ENABLED=true
CACHE_INVALIDATION_BUFFER=1000
CACHE_INVALIDATION_TIMEOUT=5s

# üíæ Cache Backup (Opcional)
CACHE_BACKUP_ENABLED=false
CACHE_BACKUP_INTERVAL=1h
CACHE_BACKUP_PATH=./cache_backups

# ü§ñ Worker Pool Configuration
WORKER_POOL_MIN_SIZE=3
WORKER_POOL_MAX_SIZE=20
WORKER_POOL_SCALE_UP_THRESHOLD=5
WORKER_POOL_SCALE_DOWN_THRESHOLD=0.3

# üîÑ Retry System Configuration
DEFAULT_MAX_RETRIES=3
DEFAULT_RETRY_DELAY=30s
RETRY_BACKOFF_STRATEGY=exponential
RETRY_EXPONENTIAL_BASE=2.0
RETRY_MAX_DELAY=10m

# ‚è±Ô∏è Action Timeouts
HTTP_ACTION_TIMEOUT=30s
EMAIL_ACTION_TIMEOUT=10s
SLACK_ACTION_TIMEOUT=10s
WEBHOOK_ACTION_TIMEOUT=15s

# üìà Monitoring Configuration
METRICS_ENABLED=true
METRICS_CLEANUP_INTERVAL=24h
METRICS_RETENTION_DAYS=30
HEALTH_CHECK_INTERVAL=60s

# üìß Email Configuration
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_NAME=Engine API Workflow
SMTP_FROM_EMAIL=noreply@yourcompany.com

# üí¨ Slack Configuration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_DEFAULT_CHANNEL=#general

# üîó Webhook Configuration
WEBHOOK_TIMEOUT=30s
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=5s

# üìä Web Interface
ENABLE_WEB_INTERFACE=true

# üíæ Backup Configuration
BACKUP_ENABLED=true
BACKUP_AUTO_ENABLED=true
BACKUP_INTERVAL=24h
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_TYPE=local
BACKUP_STORAGE_PATH=./backups

# üß™ Testing Configuration
TEST_MODE=false
TEST_DATABASE_URI=mongodb://localhost:27017/engine_workflow_test
TEST_REDIS_DB=1
INTEGRATION_TESTS_ENABLED=false

# üì° Real-time Features
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=8082
REALTIME_UPDATES_ENABLED=true

# üö® Alerts Configuration
ALERTS_ENABLED=true
ALERTS_RETENTION_DAYS=7
ALERTS_EMAIL_NOTIFICATIONS=false
ALERTS_SLACK_NOTIFICATIONS=false

# üîî Notification Channels
NOTIFICATION_WEBHOOK_ENABLED=true
NOTIFICATION_EMAIL_ENABLED=false
NOTIFICATION_SLACK_ENABLED=false
NOTIFICATION_SMS_ENABLED=false

# üìã Audit and Compliance
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
COMPLIANCE_MODE=standard
DATA_ENCRYPTION_ENABLED=false

# üéõÔ∏è Feature Flags
FEATURE_WORKFLOW_VERSIONING=true
FEATURE_ADVANCED_SCHEDULING=true
FEATURE_WORKFLOW_TEMPLATES=false
FEATURE_AUDIT_LOGGING=true
FEATURE_BULK_OPERATIONS=false
FEATURE_CACHE_SYSTEM=true

# üóÑÔ∏è Database Connection Pool
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=30s
DB_CONNECTION_IDLE_TIMEOUT=300s

# üî¥ Redis Configuration Extended
REDIS_MAX_CONNECTIONS=10
REDIS_CONNECTION_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s

# üîç Monitoring and Observability
JAEGER_ENABLED=false
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# üìÅ File Upload Configuration
UPLOAD_MAX_FILE_SIZE=10MB
UPLOAD_ALLOWED_TYPES=json,yaml,csv
UPLOAD_STORAGE_PATH=./uploads

# üåê API Configuration
API_VERSION=v1
API_REQUEST_TIMEOUT=30s
API_MAX_REQUEST_SIZE=10MB

# üîß Advanced Configuration
GRACEFUL_SHUTDOWN_TIMEOUT=15s
BATCH_PROCESSING_SIZE=100
SYNC_INTERVAL=60s

# üöÄ Auto Cleanup
AUTO_CLEANUP_ENABLED=true
AUTO_CLEANUP_OLD_LOGS_DAYS=30
AUTO_CLEANUP_OLD_METRICS_DAYS=90

# ==========================================
# CONFIGURACIONES ESPEC√çFICAS PARA 
# SISTEMA AVANZADO DE WORKERS + CACHE
# ==========================================

# üéØ Action Executor Configuration
ENABLE_REAL_HTTP_EXECUTOR=true
ENABLE_REAL_EMAIL_EXECUTOR=true
ENABLE_REAL_SLACK_EXECUTOR=true
ENABLE_REAL_WEBHOOK_EXECUTOR=true

# üìä Advanced Metrics Configuration
METRICS_COLLECTION_INTERVAL=60s
METRICS_AGGREGATION_INTERVAL=300s
METRICS_HOURLY_STATS_ENABLED=true
METRICS_DAILY_STATS_ENABLED=true

# üîÑ Advanced Retry Configuration
RETRY_JITTER_ENABLED=true
RETRY_JITTER_MAX_PERCENT=10
RETRY_FIBONACCI_BACKOFF_ENABLED=false
RETRY_CLEANUP_INTERVAL=1h

# üèä Worker Pool Advanced Settings
POOL_AUTO_SCALING_ENABLED=true
POOL_SCALING_CHECK_INTERVAL=30s
POOL_WORKER_TIMEOUT_THRESHOLD=5m
POOL_HEALTH_CHECK_INTERVAL=60s

# üìà Performance Tuning
TASK_EXECUTION_TIMEOUT=30m
STEP_EXECUTION_TIMEOUT=10m
MAX_CONCURRENT_TASKS_PER_WORKER=5
WORKER_TASK_QUEUE_SIZE=100

# üîç Advanced Monitoring
ENABLE_DETAILED_METRICS=true
ENABLE_PERFORMANCE_PROFILING=false
ENABLE_MEMORY_MONITORING=true
ENABLE_CPU_MONITORING=true

# üö® Advanced Health Checks
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_FAILURE_THRESHOLD=3
HEALTH_CHECK_SUCCESS_THRESHOLD=2
HEALTH_CHECK_DETAILED_ENABLED=true

# üìä Dashboard Advanced Features
DASHBOARD_REAL_TIME_ENABLED=true
DASHBOARD_CHART_DATA_POINTS=100
DASHBOARD_AUTO_REFRESH_ENABLED=true
DASHBOARD_EXPORT_ENABLED=true

# üîí Security Enhancements
ENABLE_API_KEY_AUTH=false
API_KEY_HEADER_NAME=X-API-Key
ENABLE_IP_WHITELIST=false
IP_WHITELIST=127.0.0.1,::1

# üì° WebSocket Configuration
WS_HEARTBEAT_INTERVAL=30s
WS_MAX_CONNECTIONS=1000
WS_MESSAGE_BUFFER_SIZE=1024
WS_CONNECTION_TIMEOUT=60s

# üéõÔ∏è Experimental Features
EXPERIMENTAL_FEATURES_ENABLED=false
EXPERIMENTAL_DISTRIBUTED_WORKERS=false
EXPERIMENTAL_AI_OPTIMIZATION=false
EXPERIMENTAL_AUTO_SCALING_ML=false

# üíæ CACHE PERFORMANCE TUNING (AVANZADO)
# ==========================================
CACHE_REDIS_POOL_SIZE=10
CACHE_REDIS_MAX_IDLE=5
CACHE_REDIS_IDLE_TIMEOUT=300s
CACHE_REDIS_MAX_ACTIVE=20

# üîÑ Cache Strategy per Domain
CACHE_DASHBOARD_STRATEGY=write_through
CACHE_WORKFLOW_STRATEGY=write_back
CACHE_USER_STRATEGY=write_through
CACHE_METRICS_STRATEGY=write_around
CACHE_QUEUE_STRATEGY=refresh_ahead

# üìä Cache Monitoring
CACHE_ENABLE_SLOW_LOG=true
CACHE_SLOW_LOG_THRESHOLD=100ms
CACHE_ENABLE_KEY_EXPIRATION_EVENTS=true
CACHE_STATS_COLLECTION_INTERVAL=60s

# üßπ Cache Maintenance
CACHE_AUTO_EVICTION_ENABLED=true
CACHE_EVICTION_POLICY=allkeys-lru
CACHE_MEMORY_WARNING_THRESHOLD=80
CACHE_MEMORY_CRITICAL_THRESHOLD=95

# üî• Cache Warmup Advanced
CACHE_WARMUP_ON_STARTUP=true
CACHE_WARMUP_CRITICAL_KEYS_ONLY=false
CACHE_WARMUP_BATCH_SIZE=50
CACHE_WARMUP_PARALLEL_TASKS=3

# üìà Cache Performance Optimization
CACHE_ENABLE_PIPELINING=true
CACHE_PIPELINE_BATCH_SIZE=10
CACHE_ENABLE_CLUSTERING=false
CACHE_CLUSTER_NODES=localhost:6379

# üõ°Ô∏è Cache Security
CACHE_ENABLE_AUTH=false
CACHE_AUTH_PASSWORD=
CACHE_ENABLE_SSL=false
CACHE_SSL_CERT_PATH=
CACHE_SSL_KEY_PATH=

# üéØ Cache Debug & Development
CACHE_DEBUG_ENABLED=false
CACHE_LOG_ALL_OPERATIONS=false
CACHE_ENABLE_PROFILING=false
CACHE_PROFILE_SLOW_OPERATIONS=true